:root{
  /* Light theme */
  --bg:#f5f7fa;--text:#1f2a37;--muted:#6b7280;--card:#ffffff;--border:#e5e7eb;
  --primary:#2563eb;--primary-600:#1d4ed8;--ok:#10b981;--warn:#f59e0b;--err:#ef4444;
  --shadow:0 10px 25px rgba(0,0,0,.07);
  --radius:14px;--surface:#fafafa;--inline:#ffffff;--pill:#f9fafb;--dialog:#ffffff;
  --side:#ffffff;--side-border:#e5e7eb;--side-text:#374151;--side-active:#eef2ff;
}
html.dark{
  --bg:#0b1220;--text:#e6edf6;--muted:#9fb0c9;--card:#0f172a;--border:#1f2a44;
  --primary:#5dd0ff;--primary-600:#39a9d6;--ok:#33d09b;--warn:#ffd166;--err:#ff6b6b;
  --shadow:0 12px 30px rgba(0,0,0,.45);
  --surface:#0b1327;--inline:#0e1a32;--pill:#0f1a33;--dialog:#0f1630;
  --side:#0f172a;--side-border:#1f2a44;--side-text:#cfe3ff;--side-active:#122241;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--text);font:15px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial;transition:background .25s ease,color .25s ease}
header{position:sticky;top:0;background:linear-gradient(180deg,#111827,#1f2937);color:#e5e7eb;padding:18px 20px;z-index:1000;box-shadow:0 2px 10px rgba(0,0,0,.1)}
html.dark header{background:linear-gradient(180deg,#0b1220,#0f172a);color:#dbeafe}
.hdr{display:flex;gap:16px;align-items:center;justify-content:space-between;max-width:1200px;margin:0 auto}

/* Brand */
.brand{display:flex;gap:12px;align-items:center}
.brand-logo{height:32px;width:auto;display:block;filter:drop-shadow(0 2px 6px rgba(0,0,0,.25))}
.brand h1{margin:0;font-size:16px;letter-spacing:.2px}

/* Badges + botones header */
.status{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.badge{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid rgba(255,255,255,.2);border-radius:999px;font-size:12px;color:#e5e7eb;opacity:.9}
.dot{width:8px;height:8px;border-radius:50%}
.menu-btn{display:none; /* visible en móvil */ padding:6px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.25);background:transparent;color:inherit;}

/* Layout base (desktop) */
.layout{display:grid;grid-template-columns:260px 1fr;max-width:1200px;margin:12px auto;gap:16px;padding:0 16px}
.sidebar{background:var(--side);border:1px solid var(--side-border);border-radius:12px;box-shadow:var(--shadow);height:calc(100vh - 120px);position:sticky;top:88px;display:flex;flex-direction:column;z-index:1010}
.side-head{padding:14px 14px;border-bottom:1px solid var(--side-border);display:flex;align-items:center;gap:10px;justify-content:space-between}
.side-head .title{margin:0;font-size:13px;color:var(--side-text)}
.side-nav{padding:10px;display:flex;flex-direction:column;gap:14px;overflow:auto}

/* Grupos / links (recursivo) */
.side-group{display:flex;flex-direction:column;gap:8px}
.side-group-title{display:flex;align-items:center;gap:8px;padding:6px 10px;color:var(--side-text);font-weight:600;opacity:.9}
.group-items{display:flex;flex-direction:column;gap:6px}
.nav-item{display:flex;gap:10px;align-items:center;padding:10px 12px;border-radius:10px;color:var(--side-text);text-decoration:none;border:1px solid transparent;position:relative}
.nav-item::before{content:"";position:absolute;left:0;top:8px;bottom:8px;width:3px;border-radius:3px;background:transparent}
.nav-item:hover{background:var(--surface);border-color:var(--side-border)}
.nav-item.active{background:var(--side-active);border-color:var(--side-border);box-shadow:0 0 0 2px rgba(93,208,255,.12)}
.nav-item.active::before{background:var(--primary)}
.icon{width:18px;display:inline-flex;justify-content:center}
.label{white-space:nowrap}

/* indentación por nivel */
[data-level="1"] .side-group-title, a.nav-item[data-level="1"]{padding-left:20px}
[data-level="2"] .side-group-title, a.nav-item[data-level="2"]{padding-left:36px}
[data-level="3"] .side-group-title, a.nav-item[data-level="3"]{padding-left:52px}

.content{min-height:60vh}
main{padding:0}

/* Grid y cards */
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
.card{grid-column:span 6;background:var(--card);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow);transition:transform .15s ease, box-shadow .2s ease}
.card:hover{transform:translateY(-1px)} .card.full{grid-column:span 12}
.card .hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
.card .hd h2{margin:0;font-size:16px} .card .bd{padding:16px;background:var(--surface)}

label{display:block;font-size:12px;color:#374151;margin:8px 0 6px} html.dark label{color:#c7d3ec}
input,select,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:var(--inline);outline:none;color:inherit;transition:border-color .2s ease, box-shadow .2s ease}
input:focus,select:focus,textarea:focus{border-color:var(--primary-600);box-shadow:0 0 0 3px rgba(59,130,246,.15)}
.row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
.col-12{grid-column:span 12}.col-6{grid-column:span 6}.col-4{grid-column:span 4}.col-3{grid-column:span 3}.col-2{grid-column:span 2}

.hint{font-size:11px;color:var(--muted);margin-top:6px}
.actions{display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;border-top:1px solid var(--border);background:var(--surface);border-radius:0 0 var(--radius) var(--radius)}
.btn{all:unset;display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;border:1px solid var(--border);cursor:not-allowed;color:#6b7280;background:#f3f4f6}
.btn.primary{background:linear-gradient(180deg,var(--primary),var(--primary-600));color:#fff;border-color:#1e40af;cursor:not-allowed}
.btn.ghost{background:var(--inline)} html.dark .btn{background:#0e1a32;color:#c8d5f2;border-color:#233457}

.input-wrap{position:relative}
.inline-action{position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:12px;border:1px solid var(--border);padding:4px 8px;border-radius:8px;background:var(--inline);color:inherit;cursor:default}

table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid var(--border);text-align:left;font-size:13px}
.pill{display:inline-block;padding:2px 8px;border-radius:999px;border:1px solid var(--border);font-size:11px;background:var(--pill)}

.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:1200}
.modal.open{display:flex}
.dialog{width:min(900px,95vw);background:var(--dialog);border-radius:16px;border:1px solid var(--border);box-shadow:var(--shadow)}
.dialog .hd{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}
.dialog .bd{padding:12px 16px}
.dialog .ft{display:flex;gap:10px;justify-content:flex-end;padding:12px 16px;border-top:1px solid var(--border)}

.banner{display:none;margin-bottom:16px;padding:10px 12px;border-radius:10px;border:1px solid;}
.banner.ok{display:block;background:#ecfdf5;border-color:#a7f3d0;color:#065f46}
.banner.err{display:block;background:#fef2f2;border-color:#fecaca;color:#991b1b}
.banner.warn{display:block;background:#fffbeb;border-color:#fde68a;color:#92400e}

.page{display:none}
.page.active{display:block}

.theme-toggle{display:inline-flex;align-items:center;gap:8px;padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.25);background:transparent;color:inherit;cursor:pointer}
.theme-toggle .ico{width:16px;height:16px;display:inline-block}

/* ----------------------------- */
/*     MODO MÓVIL (off-canvas)   */
/* ----------------------------- */
@media(max-width:980px){
  .layout{grid-template-columns:1fr}
  .menu-btn{display:inline-flex}

  /* Drawer lateral */
  .sidebar{
    position:fixed;
    top:0;left:0;bottom:0;
    height:auto;
    width:min(82vw, 340px);
    border-radius:0 12px 12px 0;
    transform:translateX(-105%);
    transition:transform .25s ease;
    z-index:1100;
  }
  body.sidebar-open .sidebar{ transform:translateX(0); }

  /* Backdrop */
  .backdrop{
    position:fixed; inset:0;
    background:rgba(0,0,0,.45);
    z-index:1090;
    display:block;
  }
  /* Oculto por defecto; lo mostramos desde JS activando body.sidebar-open */
  body:not(.sidebar-open) .backdrop{ display:none; }
}
@media(max-width:900px){
  .card{grid-column:span 12}
  .col-6,.col-4,.col-3,.col-2{grid-column:span 12}
}
